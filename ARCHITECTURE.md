# 项目架构说明

## 整体架构

本项目是一个用于验证AWS全球区域技术内容在中国区域兼容性的工具。项目采用简单高效的架构，避免过度工程化，主要包含以下组件：

1. **主程序入口** (`main.py`): 包含主要功能和流程控制
2. **核心模块** (`src/aws_china_validator/`): 包含基本验证、深度验证等功能模块
3. **数据目录** (`data/`): 存储生成的Markdown内容和验证结果

## 简化设计原则

1. **功能聚焦**: 每个模块专注于单一职责
2. **最小依赖**: 仅使用必要的外部库（python-dotenv）
3. **直接实现**: 避免过度抽象和复杂设计模式
4. **清晰流程**: 验证流程简单明了，易于理解和维护

## 主要组件说明

### 主程序 (`main.py`)

主程序实现了简化版的命令行界面和主要流程控制：

- 参数解析和配置加载
- 内容转换流程
- 基本验证流程
- 深度验证流程（可选）
- 资源清理

### 基本验证模块 (`basic_validator.py`)

负责分析内容中提到的AWS服务，并检查它们在中国区域的可用性：

- 服务识别
- 可用性检查
- 可行性评估

### 深度验证模块 (`deep_validator.py`)

根据内容类型执行实际部署或执行验证：

- 项目验证（GitHub项目）
- 教程验证（步骤执行）
- 资源管理和清理

### 内容转换模块 (`content_converter.py`)

将网页内容转换为Markdown格式：

- 网页内容获取
- 格式转换
- 缓存管理

### 工具函数 (`utils.py`)

提供基本的工具函数：

- 文件操作
- Q聊天命令执行
- JSON处理

## 数据流

1. **输入**: URL或内容文件
2. **内容转换**: 将内容转换为Markdown格式
3. **基本验证**: 分析服务可用性和可行性
4. **深度验证**: 执行实际部署或步骤验证（可选）
5. **输出**: 验证结果和建议

## 缓存机制

为提高性能，实现了简单的文件缓存机制：

- 转换后的Markdown文件缓存在`./data/`目录
- 基本验证结果缓存为JSON文件
- 深度验证结果缓存为JSON文件
- 使用`-f`标志强制重新生成缓存文件

## 配置管理

支持通过环境变量和命令行参数进行配置：

- 环境变量可以在`.env`文件中设置
- 命令行参数优先于环境变量
- 提供合理的默认值